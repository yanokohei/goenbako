<template>
  <v-dialog
    v-model="isVisibleShareLetterModal"
    @click:outside="handleCloseModal"
    max-width="500"
    :retain-focus="false"
  >
    <v-card color="amber lighten-5">
      <v-card-title>
        <span class="m-font">レターをシェアする</span>
        <v-icon>mdi-email-edit-outline</v-icon>
      </v-card-title>
      <v-divider />
      <!-- シェア項目1 -->
      <v-col class="text-center mt-4">
        <label
          class="s-font"
          for="past"
        >出会いのきっかけ・当時の印象</label>
        <v-card-actions class="justify-center">
          <v-btn
            color="blue"
            class="white--text"
            x-small
            :href="twitterShare()"
          >
            <v-icon>mdi-twitter</v-icon>
            シェアする
          </v-btn>
        </v-card-actions>
      </v-col>
      <!-- シェア項目2 -->
      <v-col class="text-center">
        <label
          class="s-font"
          for="current"
        >現在の印象・どんな人？</label>
        <v-card-actions class="justify-center">
          <v-btn
            color="blue"
            class="white--text"
            x-small
            href="http://127.0.0.1:3000/users/2"
          >
            <v-icon>mdi-twitter</v-icon>
            シェアする
          </v-btn>
        </v-card-actions>
      </v-col>
      <!-- シェア項目3 -->
      <v-col class="text-center">
        <label
          class="s-font"
          for="future"
        >聞いてみたいこと／これから話してみたいこと</label>
        <v-card-actions class="justify-center">
          <v-btn
            color="blue"
            class="white--text"
            x-small
            href="http://127.0.0.1:3000/users/2"
          >
            <v-icon>mdi-twitter</v-icon>
            シェアする
          </v-btn>
        </v-card-actions>
      </v-col>
      <!-- シェア項目4 -->
      <v-col class="text-center">
        <label
          class="s-font"
          for="expect"
        >〇〇さんに期待していること</label>
        <v-card-actions class="justify-center">
          <v-btn
            color="blue"
            class="white--text"
            x-small
            href="http://127.0.0.1:3000/users/2"
          >
            <v-icon>mdi-twitter</v-icon>
            シェアする
          </v-btn>
        </v-card-actions>
      </v-col>
      <!-- シェア項目5 -->
      <v-col class="text-center">
        <label
          class="s-font"
          for="message"
        >メッセージ</label>
        <v-card-actions class="justify-center">
          <v-btn
            color="blue"
            class="white--text"
            x-small
            href="http://127.0.0.1:3000/users/2"
          >
            <v-icon>mdi-twitter</v-icon>
            シェアする
          </v-btn>
        </v-card-actions>
      </v-col>
      <!-- 閉じる -->
      <v-row
        justify="center"
        class="ma-4"
      >
        <v-card-actions>
          <v-btn
            large
            @click="handleCloseModal"
          >
            閉じる
          </v-btn>
        </v-card-actions>
      </v-row>

      <section class="container">
        <div>
          <svg id="letter_flame" xmlns="http://www.w3.org/2000/svg" width="600" height="314" viewBox="0 0 600 314">
            <rect width="600" height="314" fill="#fbf1ff"/><path d="M599,1V313H1V1H599m1-1H0V314H600Z"/><path d="M37.47,298.108c-3.6,2.394-14.932,3.335-12.661-3.914,3.17.591,9.516.856,12.584-.256Z" fill="#918dd7"/><path d="M37.759,298.02c.243.883-4.948,1.5-5.35,1.771-.445-5.981-.094-4.924,5.273-5.941Z" fill="#918dd7"/><path d="M37.393,293.937c-3.9,1.98-19.431.549-8.827-3.657C31.808,289.807,37.385,288.879,37.393,293.937Z" fill="#f2d83a"/><path d="M50.548,276.822c-1.007.65-.717.4-.312-.153,2.673-5.631-5-1.153-1.273.471C49.342,283.9,56.025,275.3,50.548,276.822Zm-.928-.682c-.648.474-1.1-.483-.471-.85.708-.515,1.116.537.471.85Zm2.015,2.016c-.667.947-2.3.846-.921-.419.486-.524,1.451-.4.921.419Z" fill="#231815"/><path d="M53.055,272.151c-2.181.87-.823,4.623,1.407,3.583C56.661,274.872,55.256,271.129,53.055,272.151Zm.389,2.733c-.882-.388-.747-1.982.3-1.963C55.07,272.955,54.862,275.409,53.444,274.884Z" fill="#231815"/><path d="M59.094,272.7c-.456.536-1.475,1.468-1.906.2,1.994-.33,2.841-.929,1.507-2.126-2.99-1.474-3.414,4.331-.355,3.636C59.357,274.263,60.332,272.8,59.094,272.7Zm-.744-.972c-.266.077-1,.265-1.26.324-.047-.481,1.21-.881,1.26-.325Z" fill="#231815"/><path d="M63.657,271.083c-1.433-3.393-4.72.6-2.457,2.721,1.279-.413-.575-2.789,1.079-3,.825.08.433,1.823.6,2.375C64.02,274.829,63.823,271.634,63.657,271.083Z" fill="#231815"/><path d="M67.075,269.923a1.429,1.429,0,0,0-.888.207c.423-7.176-2.629,4.776-.3,3.247C68.377,275.276,70,270.226,67.075,269.923Zm.675,1.994a.856.856,0,0,1-1.71.086.84.84,0,0,1,.022-.24.856.856,0,0,1,1.71-.086A.84.84,0,0,1,67.75,271.917Z" fill="#231815"/><path d="M71.949,273.069c1.837-3.766-4.276-2.231-1.549-1.49.175-.251,1.165-.112.856.4C65.538,271.861,73.067,277.152,71.949,273.069Zm-.85-.244c.08.716-1.08.932-1.128.217.046-.293.77-.263,1.129-.217Z" fill="#231815"/><path d="M76.755,273.267c.477-1.395-2.479-.068-2.164-.255-.087-.311,1.942-3.266.269-3.031-.255,1.007-2.946,5.025-1.275,5.292,1.227-2.73.593-.012,1.631.861C77.339,275.578,73.581,273.986,76.755,273.267Z" fill="#231815"/><path d="M79.378,274.167c-2.083-1.361-3.926,2.173-1.88,3.327C79.571,278.869,81.4,275.322,79.378,274.167Zm-.445.787c1.008.582.019,2.42-.983,1.74-1.016-.584-.05-2.411.983-1.74Z" fill="#231815"/><path d="M95.56,302.069c-1.612-3.022,1.261-12.708,4.283-5.59C99.471,301.126,101.68,302.626,95.56,302.069Z" fill="#918dd7"/><path d="M95.338,296.5a2.253,2.253,0,1,1,4.5-.017Z" fill="#f2d83a"/><path d="M95.338,296.361c1.23.339,5.416-1.08,4.5,1.533C98.611,297.554,94.425,298.973,95.338,296.361Z" fill="#fff"/><line x1="94.683" y1="296.256" x2="100.497" y2="296.256" fill="none"/><line x1="94.683" y1="297.929" x2="100.497" y2="297.929" fill="none"/><path d="M56.693,282.42c1.4-.022,1.4,2.318,0,2.3C55.293,284.738,55.293,282.4,56.693,282.42Z" fill="#918dd7"/><path d="M56.693,285.138c-1.915.029-1.915-3.169,0-3.14C58.608,281.969,58.608,285.168,56.693,285.138Zm0-2.294c-.883-.014-.883,1.462,0,1.448C57.576,284.306,57.576,282.83,56.693,282.844Z"/><path d="M60.657,282.42c1.4-.022,1.4,2.318,0,2.3C59.256,284.738,59.256,282.4,60.657,282.42Z" fill="#f2d83a"/><path d="M60.657,285.138c-1.915.029-1.915-3.169,0-3.14C62.571,281.969,62.571,285.168,60.657,285.138Zm0-2.294c-.884-.014-.884,1.462,0,1.448C61.54,284.306,61.54,282.83,60.657,282.844Z"/><path d="M57,285.922c-1.155,1.272-11.149-.479-11.87,1.134-.334,1.3,9.16.357,9.637.629-.091,1.309-3.868,5.307.13,3.258C55.681,289.568,60.458,286.8,57,285.922Z"/><path d="M56.961,300.058c-4.98.519-9.483,1.326-11.584-2.922C40.275,301.547,58.966,304.239,56.961,300.058Z"/><path d="M85.3,297.832c-.344.538-1.862.969-1.666,1.64C84.924,301.362,88,297.077,85.3,297.832Z"/><path d="M92.167,298.75c-.871-.283-1.386-1.4-2.221-.875C88.78,299.181,92.665,300.66,92.167,298.75Z"/><path d="M92.29,293.394c-.8-2.781-1.934.578-3.249.131.262-3.875-2.12-4.415-1.728-.109-3.354-.082-4.107,1.3-.1,1.071.636.668-.852,8.717.9,8.591,1.8.157.285-7.922.926-8.59C89.954,294.373,92.353,295,92.29,293.394Z"/><path d="M92.018,285.6c-.66.741-3.617,1.054-4.561.677,1.171-5.192-2.229.534-3.33,2.492.216,1.293,2.105-.439,2.651-1.333.092-.125,1.436-.18,1.48.022-.3,2.627,1.917,2.16,1.727-.11C91.224,287.745,94.451,286.763,92.018,285.6Z"/><path d="M101.128,285.6c-.653.744-3.519,1.06-4.479.677,1.216-5.182-2.241.52-3.308,2.492.633,1.876,2.71-2.5,4.111-1.311-.506,2.3,2.13,2.311,1.625,0C100.118,287.521,103.749,286.935,101.128,285.6Z"/><path d="M76.323,294.817c-1.239,1.8,1.786,6.467-1.895,6.194.2-.025,2.55,2.668,2.651,1.946C77.163,301.579,78.572,295.522,76.323,294.817Z"/><path d="M75.225,299.361c.582-1.925-2.328-.144-2.672.55C73.12,301.462,74.588,300.263,75.225,299.361Z"/><path d="M81.123,299.845a6.118,6.118,0,0,1-1.7-1C76.353,298.4,81.533,303.017,81.123,299.845Z"/><path d="M80.729,290.182c-4.294,4.628,1.3-8.161-3.146-5.2-.33.181-6.933-.62-4.621.984,1.919.313,5.467-1.225,4.559,2.229-.452.124-6.615-.555-4.171,1.107,1.823.318,4.9-1.181,4.172,1.992-.316.515-6.747-.529-6.595.59-.231.994,5.317.272,5.68.481-8.109,1.583,1.677,3.208,1.527,0C79.715,292.8,83.827,291.781,80.729,290.182Z"/><path d="M69.4,294.64c-1.138,1.591-2.116.842-4.041.994,1.259-1,6.247-6.973,2.042-5.413-1.436,1.72-2.27,5.518-4.775,5.425-2.364,1.644,2.009,1.195,2.625,1.442-.674,7.375,2.3,7.383,1.625,0-.087-.226,1.758-.062,1.825-.109C69.576,299.962,71.207,294.853,69.4,294.64Z"/><path d="M62.6,290.3c1.958,2.048,5.025,2.535,1.461-.538.776-.628,7.624-5.874,2.916-5.066C66.742,285.391,61.225,289.41,62.6,290.3Z"/><path d="M63.3,298.465c-1.26-.02-1.26,2.086,0,2.066C64.558,300.551,64.558,298.445,63.3,298.465Z"/><path d="M68.786,298.465c-1.26-.02-1.261,2.086,0,2.066C70.046,300.551,70.046,298.445,68.786,298.465Z"/><path d="M74.816,295.779c-1.642-1.547-3.478,1.532-1.2,1.881C74.647,297.72,76.18,296.582,74.816,295.779Z" fill="#f2d83a"/><path d="M73.668,298.083c-2.549-.053-1.535-4.118.823-2.947C76.779,295.967,75.494,298.14,73.668,298.083ZM73.66,295.8c-2.765,1.476,2.491,1.957.944.34A1.958,1.958,0,0,0,73.66,295.8Z"/><path d="M78.7,295.7c1.092-.814,2.734.117,2.062,1.48C79.967,298.584,76.822,296.658,78.7,295.7Z" fill="#918dd7"/><path d="M79.792,298.1c-1.334,0-3.2-1.714-1.272-2.776C80.9,293.618,82.693,297.881,79.792,298.1Zm-.9-2.026c-1.285.57,1.165,1.758,1.57.815.327-1-.807-1.343-1.573-.815Z"/><path d="M37.882,293.809a4.687,4.687,0,0,0-3.643-4.614c1.015-2.059-2.1-2.259-2.529-.414a.507.507,0,0,0-.707-.112c-.014.011-.027.021-.04.033-.678-2.184-4.056-.757-2.119.905-4.694-.665-5.961,7.507-3.527,9.831C30.337,300.067,40.075,301.987,37.882,293.809Zm-.994-.219c-5.277,1.3-3.592.107-6.134-3.117,2.316-.782,2.663,1.038,3.517,2.7.952-.588-.189-2.322-.778-2.96C35.177,290.017,36.723,291.684,36.888,293.59Zm-4.76-4.611c.6-1.651,2.774-.313.733.253C32.636,289.242,31.81,289.374,32.128,288.979Zm-3.138-.451c.457-.844,1.492.084,1.725.685-.54.222-1.815.075-1.725-.685Zm-.628,2.153c1.722-.036,2.941,1.379,3.162,3.569C28.7,293.945,21.045,293.991,28.362,290.681ZM25.418,298.4c-.12-.009-.069-3.695-.11-3.751,4.241,1.017,6.965-1.471,6.332,4.527Zm11.508-.347-4.308,1.056c-.47-4.757.207-3.83,4.3-4.474-.052.056.167,3.429.008,3.42Z"/><path d="M31.005,283.014c-13.408-.2-13.409,22.191,0,21.986C44.413,305.2,44.415,282.809,31.005,283.014Zm0,20.556c-11.663.176-11.663-19.3,0-19.124C42.668,284.27,42.669,303.748,31.005,303.57Z"/><path d="M101.534,292.674c-.952-1-.21-4.709-3.509-2.041a.59.59,0,0,0-.834-.034l-.034.034c-1.2-1.81-4.366-.382-2.725,1.547-.735.255-2.027,1.532-.591,1.737,1.18-.686,2.365-2.11,3.751-2.058C98.485,291.382,103.241,295.923,101.534,292.674Zm-5.041-1.494c-1.622.84-1.412-1.067.026-.016Zm2.372.087a1.493,1.493,0,0,1-.2-.1c1.147-.994,1.893.651.2.1Z"/><path d="M97.591,292.708c-4.125-.627-4.795,9.065-2.522,10.35,1.04-.321,6.057.89,6.066-1.091C101.029,299.048,102.151,292.639,97.591,292.708Zm0,1.377a2.277,2.277,0,0,1,2.15,1.683h-4.3a2.273,2.273,0,0,1,2.15-1.683Zm2.25,7.749c-3.468.591-5.1,1.114-4.5-3.416C98.9,298.64,100.37,297.1,99.841,301.834Zm0-4.392c-.348-.281-5.341.708-4.5-.7.339.283,5.343-.707,4.5.7Z"/><rect x="46.5" y="27.5" width="507" height="235" rx="30" fill="#fff"/>
            <text
              x="50%"
              y="50%"
              font-size="8px"
              text-anchor="middle">{{receivedLetter.sender.name}}
            </text>
          </svg>
        </div>
      </section>
    </v-card>
  </v-dialog>
</template>

<script>
import axios from "axios";
import { mapGetters } from "vuex"

export default {
  name: "ShareLetterModal",
  props: {
    isVisibleShareLetterModal: {
      type: Boolean,
      required: true,
    },
    receivedLetter: {
      type: Object,
      required: true
    },
  },
  computed: {
    ...mapGetters({ currentUser: "users/currentUser" }),
  },
  methods: {
    handleCloseModal() {
      this.$emit("close-modal");
    },
    twitterShare() {
      const url = `https://goenbako.com/${this.currentUser.twitter_id}`
      return `https://twitter.com/share?text=${this.receivedLetter.sender.name}さん からファンレターが届いたよ！%0a&url=${url}&hashtags=ご縁箱`;
    },
  },
};
</script>

<style scoped>
.modal {
  display: block;
}
.m-font{
  font-size: 1.1em;
  font-weight: bold;
  line-height: 1;
  color: #2c281e;
}
.s-font{
  font-size: 0.8em;
  font-weight: bold;
  line-height: 1;
  color: #2c281e;
}
</style>
